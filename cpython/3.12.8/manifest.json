{
  "license": "PSF-2.0",
  "homepage": "https://www.python.org/",
  "source": [
    {
      "type": "tarball",
      "url": "https://www.python.org/ftp/python/3.12.8/Python-3.12.8.tgz",
      "strip_components": 1,
      "dest": "cpython"
    }
  ],
  "dependencies": {
    "openssl": "3.2.0",
    "zlib": "1.3.1"
  },
  "build": [
    {
      "when": { "os": "linux", "arch": "x86_64" },
      "run": [
        "./configure",
        "--prefix=${PREFIX}",
        "--enable-shared",
        "--with-openssl=${PREFIX}",
        "--with-ensurepip=no"
      ],
      "env": {
        "CPPFLAGS": "-I${PREFIX}/include",
        "LDFLAGS": "-L${PREFIX}/lib",
        "PKG_CONFIG_PATH": "${PREFIX}/lib/pkgconfig"
      },
      "cwd": "cpython"
    },
    {
      "when": { "os": "linux", "arch": "aarch64" },
      "run": [
        "./configure",
        "--prefix=${PREFIX}",
        "--enable-shared",
        "--with-openssl=${PREFIX}",
        "--with-ensurepip=no"
      ],
      "env": {
        "CPPFLAGS": "-I${PREFIX}/include",
        "LDFLAGS": "-L${PREFIX}/lib",
        "PKG_CONFIG_PATH": "${PREFIX}/lib/pkgconfig"
      },
      "cwd": "cpython"
    },
    {
      "when": { "os": "darwin", "arch": "x86_64" },
      "run": [
        "./configure",
        "--prefix=${PREFIX}",
        "--enable-shared",
        "--with-openssl=${PREFIX}",
        "--with-ensurepip=no"
      ],
      "env": {
        "CPPFLAGS": "-I${PREFIX}/include",
        "LDFLAGS": "-L${PREFIX}/lib",
        "PKG_CONFIG_PATH": "${PREFIX}/lib/pkgconfig"
      },
      "cwd": "cpython"
    },
    {
      "when": { "os": "darwin", "arch": "aarch64" },
      "run": [
        "./configure",
        "--prefix=${PREFIX}",
        "--enable-shared",
        "--with-openssl=${PREFIX}",
        "--with-ensurepip=no"
      ],
      "env": {
        "CPPFLAGS": "-I${PREFIX}/include",
        "LDFLAGS": "-L${PREFIX}/lib",
        "PKG_CONFIG_PATH": "${PREFIX}/lib/pkgconfig"
      },
      "cwd": "cpython"
    },
    {
      "when": { "os": "linux", "arch": "x86_64" },
      "run": ["make", "-j${JOBS}"],
      "cwd": "cpython"
    },
    {
      "when": { "os": "linux", "arch": "aarch64" },
      "run": ["make", "-j${JOBS}"],
      "cwd": "cpython"
    },
    {
      "when": { "os": "darwin", "arch": "x86_64" },
      "run": ["make", "-j${JOBS}"],
      "cwd": "cpython"
    },
    {
      "when": { "os": "darwin", "arch": "aarch64" },
      "run": ["make", "-j${JOBS}"],
      "cwd": "cpython"
    },
    {
      "when": { "os": "linux", "arch": "x86_64" },
      "run": ["make", "install", "DESTDIR=${DESTDIR}"],
      "cwd": "cpython"
    },
    {
      "when": { "os": "linux", "arch": "aarch64" },
      "run": ["make", "install", "DESTDIR=${DESTDIR}"],
      "cwd": "cpython"
    },
    {
      "when": { "os": "darwin", "arch": "x86_64" },
      "run": ["make", "install", "DESTDIR=${DESTDIR}"],
      "cwd": "cpython"
    },
    {
      "when": { "os": "darwin", "arch": "aarch64" },
      "run": ["make", "install", "DESTDIR=${DESTDIR}"],
      "cwd": "cpython"
    }
  ]
}
