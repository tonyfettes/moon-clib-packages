{
  "license": "Apache-2.0",
  "source": [
    {
      "type": "tarball",
      "url": "https://www.openssl.org/source/openssl-3.2.0.tar.gz",
      "strip_components": 1,
      "dest": "openssl"
    }
  ],
  "dependencies": {
    "zlib": "1.3.1"
  },
  "build": [
    {
      "when": { "os": "linux", "arch": "x86_64" },
      "run": ["./Configure", "linux-x86_64", "--prefix=${PREFIX}", "shared", "zlib"],
      "cwd": "openssl"
    },
    {
      "when": { "os": "linux", "arch": "aarch64" },
      "run": ["./Configure", "linux-aarch64", "--prefix=${PREFIX}", "shared", "zlib"],
      "cwd": "openssl"
    },
    {
      "when": { "os": "darwin", "arch": "x86_64" },
      "run": ["./Configure", "darwin64-x86_64-cc", "--prefix=${PREFIX}", "shared", "zlib"],
      "cwd": "openssl"
    },
    {
      "when": { "os": "darwin", "arch": "aarch64" },
      "run": ["./Configure", "darwin64-arm64-cc", "--prefix=${PREFIX}", "shared", "zlib"],
      "cwd": "openssl"
    },
    {
      "run": ["make", "-j${JOBS}"],
      "cwd": "openssl"
    },
    {
      "run": ["make", "install_sw", "install_ssldirs", "DESTDIR=${DESTDIR}"],
      "cwd": "openssl"
    }
  ]
}
